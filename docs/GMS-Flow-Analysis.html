<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GMS Process Flow Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        h1 {
            color: #1a1a1a;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        h2 {
            color: #2c5282;
            margin-top: 50px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #2c5282;
            font-size: 1.8em;
        }

        h3 {
            color: #3182ce;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .flow-section {
            margin: 30px 0;
        }

        .process-step {
            background: #f8f9fa;
            border-left: 4px solid #3182ce;
            padding: 20px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .process-step.manual {
            border-left-color: #e53e3e;
            background: #fff5f5;
        }

        .process-step.automated {
            border-left-color: #38a169;
            background: #f0fff4;
        }

        .step-number {
            display: inline-block;
            background: #3182ce;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
        }

        .manual .step-number {
            background: #e53e3e;
        }

        .automated .step-number {
            background: #38a169;
        }

        .step-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 8px;
        }

        .step-details {
            color: #555;
            margin-left: 40px;
        }

        .pain-point {
            background: #fed7d7;
            padding: 8px 12px;
            margin: 10px 0 10px 40px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .pain-point:before {
            content: "‚ö†Ô∏è Pain Point: ";
            font-weight: bold;
            color: #c53030;
        }

        .tech-note {
            background: #e6fffa;
            padding: 8px 12px;
            margin: 10px 0 10px 40px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .tech-note:before {
            content: "üîß Tech: ";
            font-weight: bold;
            color: #2c7a7b;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.95em;
        }

        thead {
            background: #2c5282;
            color: white;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #ddd;
        }

        tbody tr:nth-child(even) {
            background: #f8f9fa;
        }

        tbody tr:hover {
            background: #e6f7ff;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge.xs { background: #c6f6d5; color: #22543d; }
        .badge.sm { background: #bee3f8; color: #2c5282; }
        .badge.md { background: #feebc8; color: #7c2d12; }
        .badge.lg { background: #fed7d7; color: #742a2a; }
        .badge.xl { background: #e9d8fd; color: #44337a; }

        .badge.required { background: #fc8181; color: white; }
        .badge.optional { background: #4fd1c5; color: white; }
        .badge.phase2 { background: #b794f4; color: white; }

        .legend {
            background: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            margin: 30px 0;
        }

        .legend-item {
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 10px;
        }

        .arrow {
            text-align: center;
            font-size: 2em;
            color: #cbd5e0;
            margin: 10px 0;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        @media (max-width: 900px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }

        .comparison-col {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
        }

        .comparison-col h3 {
            margin-top: 0;
        }

        .highlight {
            background: #fef5e7;
            padding: 20px;
            border-left: 4px solid #f39c12;
            margin: 20px 0;
        }

        .highlight strong {
            color: #d68910;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>GMS Process Flow Analysis</h1>
        <p class="subtitle">California Commission on Teacher Credentialing - Grants Management System</p>
        <p class="subtitle"><em>Current Manual Process vs. Automated Flow with V1 Complexity Assessment</em></p>

        <div class="highlight">
            <strong>Document Purpose:</strong> This analysis maps the current manual grant management process against the proposed automated GMS workflow. Each automated feature is sized for complexity and prioritized for V1 (April 1, 2026 launch) vs. Phase 2.
            <br><br>
            <strong>Version:</strong> 2.1 - Updated with Dashboard Requirements
            <br>
            <strong>Sources:</strong> SOW Document, Process Flow Template (Excel), Figma Flow Diagram (PDF + PNG with dashboard specs), CTC Requirements
            <br><br>
            <strong>Latest Update:</strong> Dashboard specifications added from updated Figma (Nov 3, 4:22 PM) - includes financial tracking, volume metrics, and outcome KPIs
        </div>

        <!-- CURRENT MANUAL PROCESS -->
        <h2>üìã Current Manual Process</h2>
        <p><strong>Timeline:</strong> 6-8 weeks per grant cycle (not including multi-month conditional funding revisions)</p>

        <div class="flow-section">
            <div class="process-step manual">
                <span class="step-number">1</span>
                <div class="step-title">Grant Legislation Passes</div>
                <div class="step-details">
                    State legislature passes education grant in budget bill with appropriation amount, encumbrance/liquidation dates, and eligibility rules.
                </div>
                <div class="pain-point">Staff manually analyze legislation to extract requirements. No structured capture of rules.</div>
            </div>

            <div class="process-step manual">
                <span class="step-number">2</span>
                <div class="step-title">CTC Creates RFA Documents</div>
                <div class="step-details">
                    Staff create Request for Application (RFA) as Word/PDF documents with sections: eligibility, allowable uses, application questions, budget templates, scoring rubric (if competitive).
                </div>
                <div class="pain-point">RFA creation takes days. Questions are unstructured (Word doc). No validation rules.</div>
            </div>

            <div class="process-step manual">
                <span class="step-number">3</span>
                <div class="step-title">Public Advertisement</div>
                <div class="step-details">
                    CTC posts RFA on website, sends email via PSD e-Newsletter. IHE/LEA download PDF, prepare application offline.
                </div>
                <div class="pain-point">No tracking of who downloaded RFA or intends to apply. No proactive communication.</div>
            </div>

            <div class="process-step manual">
                <span class="step-number">4</span>
                <div class="step-title">Application Intake via Email</div>
                <div class="step-details">
                    IHE/LEA email cover page to grants@ctc.ca.gov with POC info and LEA/IHE identification. CTC manually creates custom Excel spreadsheet per applicant and emails back.
                </div>
                <div class="pain-point">Staff manually create/email spreadsheets. Lost emails. No version control. Manual routing.</div>
            </div>

            <div class="process-step manual">
                <span class="step-number">5</span>
                <div class="step-title">LEA/IHE Collects Grantee Demographics</div>
                <div class="step-details">
                    LEA or IHE collects demographic info (name, DOB, SSN/ITIN, credential area, placement info) from individual student teachers/candidates via their own methods (email, forms, etc).
                </div>
                <div class="pain-point">No standardized collection. Data quality issues. LEA/IHE use their own processes.</div>
            </div>

            <div class="process-step manual">
                <span class="step-number">6</span>
                <div class="step-title">Application Submission via Email</div>
                <div class="step-details">
                    LEA/IHE fill out Excel spreadsheet with grantee list, demographics, budget, narrative responses. Email completed PDF back to CTC.
                </div>
                <div class="pain-point">Incomplete applications. Math errors in budgets. Missing required info. Multiple revision cycles via email.</div>
            </div>

            <div class="process-step manual">
                <span class="step-number">7</span>
                <div class="step-title">Manual Review & Scoring</div>
                <div class="step-details">
                    CTC staff create scoring sheet, hold calibration session. Reviewers read PDF applications, score in separate Excel spreadsheets. Staff manually aggregate scores and hold deliberation meetings.
                </div>
                <div class="pain-point">No COI checking. Manual score aggregation. Reviewer availability issues. No audit trail.</div>
            </div>

            <div class="process-step manual">
                <span class="step-number">8</span>
                <div class="step-title">Conditional Funding Revisions</div>
                <div class="step-details">
                    CTC emails "conditionally funded" notice with errors to fix. LEA/IHE revise and resubmit PDF. Staff review again. Cycle repeats for weeks/months.
                </div>
                <div class="pain-point">"This process can go on over several weeks or more depending" - no tracking of revisions, version control issues.</div>
            </div>

            <div class="process-step manual">
                <span class="step-number">9</span>
                <div class="step-title">GAA Creation & DocuSign</div>
                <div class="step-details">
                    Fiscal staff manually copy/paste grant timeline and budget from approved application PDF into Grant Award Agreement (GAA) Word template. Upload to DocuSign and email to LEA/IHE signer.
                </div>
                <div class="pain-point">Manual copy/paste errors. DocuSign only emails signer (not day-to-day contact). Reminders needed.</div>
            </div>

            <div class="process-step manual">
                <span class="step-number">10</span>
                <div class="step-title">FI$Cal Manual Entry</div>
                <div class="step-details">
                    Fiscal staff manually enter PO into FI$Cal, create invoices, track through approval workflow (DGS ‚Üí CFS ‚Üí SCO ‚Üí warrant issued).
                </div>
                <div class="pain-point">No real-time fund tracking. Manual appropriation depletion calculations. No visibility for program staff.</div>
            </div>

            <div class="process-step manual">
                <span class="step-number">11</span>
                <div class="step-title">Annual Reporting via Spreadsheets</div>
                <div class="step-details">
                    Grantees complete Excel spreadsheet annual reports (July-Aug) and expenditure reports (Nov). Email to CTC. Staff manually validate data, request corrections via email.
                </div>
                <div class="pain-point">"Tedious and a time suck for both staff and grantee." No validation rules. Manual calculations. Multi-week revision cycles.</div>
            </div>
        </div>

        <!-- MERGE STRATEGY -->
        <h2>üîÑ Merge Strategy: Figma + Requirements Analysis</h2>

        <div class="highlight">
            <strong>Approach:</strong> Figma provides the visual workflow skeleton (user interactions, decision points). Our requirements analysis adds technical implementation, missing features, and state machines.
        </div>

        <h3>Key Integration Points</h3>

        <div class="comparison">
            <div class="comparison-col">
                <h3>‚úÖ Figma Confirmed Features</h3>
                <ul style="line-height: 2;">
                    <li>Two-party workflow (IHE ‚Üí LEA)</li>
                    <li>Email notifications throughout</li>
                    <li>Three review outcomes (Approve/Reject fixable/Reject no funds)</li>
                    <li>DocuSign GAA integration</li>
                    <li>Separate IHE and LEA reporting</li>
                    <li>Fiscal team payment tracking</li>
                    <li>Marketing campaign awareness</li>
                </ul>
            </div>

            <div class="comparison-col">
                <h3>‚ûï Features Added from Analysis</h3>
                <ul style="line-height: 2;">
                    <li><strong>Magic link grantee data collection</strong></li>
                    <li><strong>Real-time fund tracking dashboard</strong></li>
                    <li><strong>Draft/auto-save application state</strong></li>
                    <li><strong>Public Portal details</strong></li>
                    <li><strong>Award state machine granularity</strong></li>
                    <li>JSON Schema form builder</li>
                    <li>Audit logging throughout</li>
                </ul>
            </div>
        </div>

        <h3>Resolved Ambiguities</h3>
        <table>
            <thead>
                <tr>
                    <th>Figma Ambiguity</th>
                    <th>Resolution</th>
                    <th>Implementation</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>"Fiscal team creates GAA [in system? or uploads to system?]"</strong></td>
                    <td>System auto-generates</td>
                    <td>GMS populates GAA template from application data, fiscal reviews and triggers DocuSign. Manual upload only for exceptions</td>
                </tr>
                <tr>
                    <td><strong>SEID matching timing unclear</strong></td>
                    <td>Attempt at IHE entry</td>
                    <td>When IHE enters candidate name/DOB, system queries ECS for SEID. If found, pre-populates. LEA confirms/corrects later</td>
                </tr>
                <tr>
                    <td><strong>Multiple candidates per application?</strong></td>
                    <td>Repeating form sections + bulk upload</td>
                    <td>V1: Repeating sections for 5-10 candidates. Phase 2: CSV bulk upload for 50+ candidates</td>
                </tr>
                <tr>
                    <td><strong>DocuSign routing order not shown</strong></td>
                    <td>Multi-party signing sequence</td>
                    <td>LEA GAA Signer ‚Üí Cara (CTC) ‚Üí Sara Saelee (CTC Fiscal). All must sign before complete</td>
                </tr>
                <tr>
                    <td><strong>Fund depletion decision point</strong></td>
                    <td>Hybrid: Warn + Decide</td>
                    <td>Soft warning at submission if <10% remaining. Grants Team can still reject "No Funding" at review if exhausted</td>
                </tr>
            </tbody>
        </table>

        <!-- IDEAL AUTOMATED FLOW -->
        <h2>üöÄ Merged Automated Flow (GMS)</h2>
        <p><strong>Timeline:</strong> 2-3 weeks per grant cycle (with real-time fund tracking and automated validation)</p>
        <p><em>This flow incorporates insights from both the Figma diagram and requirements analysis.</em></p>

        <div class="flow-section">
            <div class="process-step automated">
                <span class="step-number">1</span>
                <div class="step-title">Grant Program Configuration (Staff Portal)</div>
                <div class="step-details">
                    Admin creates Grant Cycle in Staff Portal: define appropriation amount, encumbrance/liquidation dates, open/close dates, JSON schema for application questions, scoring rubric (if competitive), award calculation formula, required report types.
                </div>
                <div class="tech-note">JSON Schema Builder UI, dynamic form rendering, formula editor for award calculations</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">2</span>
                <div class="step-title">Automated RFA Publishing (Public Portal)</div>
                <div class="step-details">
                    System auto-generates RFA webpage from grant cycle configuration. Public can view without login. IHE/LEA can submit "Intent to Apply" (triggers notification to CTC).
                </div>
                <div class="tech-note">Static site generation from DB, CMS-style content management, email notification triggers</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">3</span>
                <div class="step-title">IHE Application Start (Grantee Portal)</div>
                <div class="step-details">
                    <strong>IHE becomes aware of STIPEND grant</strong> via marketing campaign ‚Üí Clicks link, signs in with Google/Microsoft OAuth ‚Üí Starts application in <strong>Draft state (auto-save enabled)</strong>.<br><br>
                    <strong>IHE fills in:</strong>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>Their own POC (point of contact)</li>
                        <li>Candidate's name, DOB, last 4 of SSN/ITIN</li>
                        <li>Credential area (dropdown from CDE taxonomy)</li>
                        <li>County assignment (CDS code - validated format: 00-00000-0000000)</li>
                        <li>LEA POC contact info</li>
                        <li>Checkbox if candidate has placements in multiple LEAs</li>
                    </ul>
                    <br>
                    <strong>System attempts SEID match</strong> when IHE enters candidate name/DOB. If found, pre-populates demographics from ECS. If not found, allows manual entry (LEA will confirm later).
                </div>
                <div class="tech-note">OAuth 2.0, ECS REST API (SEID lookup), dynamic form rendering from JSON Schema, client-side + server-side validation, auto-save to Draft state every 30 seconds</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">4</span>
                <div class="step-title">IHE Submits ‚Üí LEA Handoff</div>
                <div class="step-details">
                    <strong>IHE submits application</strong> ‚Üí Application status changes to "Submitted by IHE" (IHE portion locked for editing).<br><br>
                    <strong>LEA receives email notification</strong>: "You have an application that requires attention" with link to Grantee Portal.<br><br>
                    <strong>LEA clicks link, logs in, views application</strong> ‚Üí Sees IHE-entered candidate info (read-only) ‚Üí Fills in LEA portion:<br>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>LEA's own POC</li>
                        <li>Confirms SEID (or corrects if IHE entry was wrong)</li>
                        <li>GAA Signer name/email</li>
                        <li>Fiscal agent contact</li>
                        <li>Superintendent (if different from GAA signer)</li>
                        <li>How they intend to pay student teacher (dropdown: single payment, two installments, etc.)</li>
                        <li>Payment schedule (dates)</li>
                    </ul>
                    <br>
                    <strong>LEA submits</strong> ‚Üí Application status changes to "Submitted" (fully locked, ready for Grants Team review).
                </div>
                <div class="tech-note">State machine workflow: Draft ‚Üí Submitted by IHE ‚Üí Submitted. Email notifications with tokenized links. Role-based access (IHE sees only IHE section, LEA sees both but can only edit LEA section)</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">5</span>
                <div class="step-title">Magic Link Grantee Data Collection</div>
                <div class="step-details">
                    LEA clicks "Send Data Collection Links" ‚Üí System generates unique tokens per grantee ‚Üí Email with link: gms.ctc.ca.gov/collect/{token} ‚Üí Grantee fills form (demographics, grant-specific questions) ‚Üí Data tied to application. LEA sees completion dashboard.
                </div>
                <div class="tech-note">JWT tokens with expiration, unauthenticated form submission, email service integration, progress tracking</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">6</span>
                <div class="step-title">Grants Team Review (Staff Portal)</div>
                <div class="step-details">
                    <strong>Grants Team receives notification</strong>: "COMPLETED applications in queue" (email digest sent daily, or real-time if high priority).<br><br>
                    <strong>Grants Team logs into Staff Portal</strong> ‚Üí Sees application queue with filters (by status, grant cycle, org, submission date).<br><br>
                    <strong>Staff clicks application</strong> ‚Üí Views all submitted data (IHE + LEA portions, magic link collected data, file uploads).<br><br>
                    <strong>Eligibility check:</strong> Staff verifies:
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>Organization is eligible (verified LEA/IHE)</li>
                        <li>Candidate not already receiving STIPEND in this grant cycle (duplicate SEID check)</li>
                        <li>All required fields complete</li>
                        <li>Credential area is valid for program</li>
                        <li>Funding available (check real-time fund dashboard)</li>
                    </ul>
                    <br>
                    <strong>Decision (three outcomes):</strong>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li><strong>Approved:</strong> Proceeds to award generation (Step 8)</li>
                        <li><strong>Not Approved (Bad Info):</strong> Staff adds inline comments on fields needing correction ‚Üí System unlocks application ‚Üí LEA receives email with issues ‚Üí LEA fixes ‚Üí Resubmits ‚Üí Back to review queue</li>
                        <li><strong>Not Approved (No Funding):</strong> If funds exhausted since submission ‚Üí LEA receives "No funding available" notification ‚Üí End process</li>
                    </ul>
                </div>
                <div class="tech-note">Application queue UI (Telerik Grid), inline commenting system, eligibility validation rules, duplicate detection (SEID + grant cycle), real-time fund check, audit logging of all review decisions</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">7</span>
                <div class="step-title">In-App Conditional Funding Revisions</div>
                <div class="step-details">
                    Staff marks application "Conditionally Funded" with inline comments on specific fields ‚Üí LEA/IHE notified via email ‚Üí Log in to see comments ‚Üí Edit inline ‚Üí Resubmit ‚Üí Staff review with version history visible.
                </div>
                <div class="tech-note">Version control (Entity Framework temporal tables), inline commenting, notification system, diff viewer</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">8</span>
                <div class="step-title">Award Generation & Fund Depletion</div>
                <div class="step-details">
                    <strong>When Grants Team approves application:</strong><br><br>
                    1. System calculates award amount:
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>Single LEA placement: $10,000</li>
                        <li>Two LEA placements: $5,000 each ($10,000 total)</li>
                        <li>Three+ LEA placements: $10,000 / number_of_LEAs</li>
                    </ul>
                    <br>
                    2. System creates <strong>Award record</strong> with status "Pending GAA"<br>
                    3. Reserves funds: <code>GrantCycle.ReservedAmount += award_amount</code><br>
                    4. Updates real-time dashboard: <code>AvailableFunds = Appropriation - (Encumbered + Reserved)</code><br>
                    5. If remaining funds < 10% of appropriation, system displays warning to staff on all new application submissions<br><br>
                    <strong>Fiscal Team receives notification</strong>: "GAA is needed" for approved application(s).
                </div>
                <div class="tech-note">SQL transactions with row locking, award amount calculation engine, real-time dashboard widget (updates via SignalR), configurable threshold alerts, email notifications to fiscal team</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">9</span>
                <div class="step-title">GAA Auto-Generation + Multi-Party DocuSign</div>
                <div class="step-details">
                    <strong>Fiscal Team logs into Staff Portal</strong> ‚Üí Sees list of awards needing GAA.<br><br>
                    <strong>For each award, Fiscal clicks "Generate GAA":</strong>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>System populates GAA template (Word/PDF) with data from Application + Award:
                            <ul style="margin-left: 20px;">
                                <li>Grant program name, fiscal year, award amount</li>
                                <li>LEA/IHE organization details, POC info</li>
                                <li>Candidate demographics, credential area</li>
                                <li>Payment schedule, budget details</li>
                                <li>Grant timeline, reporting requirements</li>
                            </ul>
                        </li>
                        <li>Fiscal reviews generated GAA (can manually edit if needed for exceptions)</li>
                        <li>Fiscal clicks "Send via DocuSign"</li>
                    </ul>
                    <br>
                    <strong>System creates DocuSign envelope via API with routing order:</strong>
                    <ol style="margin-top: 10px; margin-left: 40px;">
                        <li>LEA GAA Signer (from application)</li>
                        <li>Cara (CTC Program Lead)</li>
                        <li>Sara Saelee (CTC Fiscal)</li>
                    </ol>
                    <br>
                    System emails:
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>LEA GAA Signer: "Your GAA is ready for signature"</li>
                        <li>LEA day-to-day contact: "Your GAA has been sent for signature to [signer name]"</li>
                    </ul>
                    <br>
                    <strong>Each party signs</strong> ‚Üí DocuSign webhook updates system after each signature.<br><br>
                    <strong>When all parties sign:</strong> Award.Status changes to "GAA Signed", Award.GaaSignedDate recorded ‚Üí Fiscal receives notification ‚Üí LEA receives notification "Your GAA is fully executed, payment is being processed"
                </div>
                <div class="tech-note">Template engine (Razor + OpenXML for Word docs), DocuSign REST API (EnvelopeDefinition with routing order), DocuSign Connect webhooks, email notifications to multiple recipients, Award state transitions</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">10</span>
                <div class="step-title">Payment Process & Tracking</div>
                <div class="step-details">
                    <strong>Phase 1 (V1 - April 2026):</strong><br>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>System generates CSV/XML export with PO data (award details, LEA info, amount)</li>
                        <li>Fiscal downloads export and manually enters into FI$Cal</li>
                        <li><strong>Payment process happens in FI$Cal (outside GMS):</strong> Eddie creates PO ‚Üí Approvals ‚Üí Invoice ‚Üí Accounting ‚Üí DGS CFS creates voucher ‚Üí SCO generates warrant ‚Üí Mailed to LEA</li>
                        <li>Fiscal staff manually updates GMS: Clicks "Mark Payment Distributed" for each award</li>
                        <li>Award.Status changes to "Payment Completed", Award.PaymentDistributedDate recorded</li>
                        <li><strong>System notifies LEA:</strong> "Payment is coming" email with award amount and expected timeframe</li>
                    </ul>
                    <br>
                    <strong>Phase 2 (Post-April 2026):</strong><br>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>REST API creates payables directly in FI$Cal (no manual entry)</li>
                        <li>Scheduled job polls FI$Cal for payment status updates</li>
                        <li>Award.PaymentStatus tracks full lifecycle: PO Created ‚Üí Invoice Generated ‚Üí Voucher Created ‚Üí Warrant Issued ‚Üí Completed</li>
                        <li>Automatic notifications to LEA at each milestone</li>
                    </ul>
                    <br>
                    <strong>LEA Pays Student Teacher (outside GMS):</strong> LEA receives warrant ‚Üí Distributes to student teacher per their indicated payment schedule ‚Üí LEA will report payment details in final report.
                </div>
                <div class="tech-note">Phase 1: CSV/XML export generator, manual status update UI, notification emails. Phase 2: FI$Cal API integration (if available), scheduled polling jobs with retry logic, payment state machine tracking</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">11</span>
                <div class="step-title">Structured Reporting with Validation</div>
                <div class="step-details">
                    <strong>System sends report reminders</strong> at configured intervals (e.g., 14 days before due date, on due date, 7 days after due date).<br><br>
                    <strong>IHE/LEA are alerted to fill out reports</strong> via email: "Your annual report for [Grant Name] is now due."<br><br>

                    <strong>IHE Report (completion tracking):</strong><br>
                    IHE logs in ‚Üí Clicks report link ‚Üí Fills dynamic form:
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>Completion confirmation (Did candidate complete student teaching? Yes/No)</li>
                        <li>If yes: Completion date</li>
                        <li>If no: Reason for early exit (dropdown: Changed to intern, withdrew from program, moved, etc.)</li>
                        <li>Employment area (Where is candidate now employed? LEA name, credential area)</li>
                        <li>Additional notes (optional text field)</li>
                    </ul>
                    Submits ‚Üí Validation checks (required fields, date formats, etc.) ‚Üí Success message<br><br>

                    <strong>LEA Report (payment confirmation):</strong><br>
                    LEA logs in ‚Üí Clicks report link ‚Üí Fills dynamic form:
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>How they categorized student teacher for payment (dropdown: Independent contractor, W-2 employee, stipend, etc.)</li>
                        <li>Payment schedule and amounts (repeating section for multiple payments)</li>
                        <li>Payment dates (date picker with validation)</li>
                        <li>Total amount distributed (auto-calculated, must equal award amount or explain variance)</li>
                        <li>Notes on any payment issues (optional)</li>
                    </ul>
                    Submits ‚Üí Validation checks (total must equal award amount ¬± tolerance, all required fields complete) ‚Üí Success message<br><br>

                    <strong>Grants Team receives notification:</strong> "Reports are available for review"<br>
                    Staff logs in ‚Üí Sees report dashboard with:
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>Completion percentage by grant cycle</li>
                        <li>List of submitted reports (filterable)</li>
                        <li>List of overdue reports (with reminders sent count)</li>
                    </ul>
                    Staff reviews each report ‚Üí Approves or requests revisions (with inline comments) ‚Üí If revisions needed, grantee receives email and can edit/resubmit
                </div>
                <div class="tech-note">Dynamic form rendering from JSON schema, client/server validation, auto-calculation formulas, scheduled reminder jobs (Hangfire or Azure Functions), report completion dashboard, inline commenting for revisions</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">12</span>
                <div class="step-title">Staff Operational Dashboard (Always Visible)</div>
                <div class="step-details">
                    <strong>Persistent widget/page visible throughout all workflow steps.</strong> Staff Portal displays real-time metrics:<br><br>

                    <strong>Financial Tracking:</strong>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li><strong>Appropriated:</strong> Total grant cycle funding (from legislation)</li>
                        <li><strong>Reserved:</strong> Awards approved, GAA not yet signed</li>
                        <li><strong>Encumbered:</strong> GAA signed, payment not completed</li>
                        <li><strong>Disbursed:</strong> Payment completed to LEAs</li>
                        <li><strong>Remaining:</strong> Available for new awards = Appropriated - (Reserved + Encumbered + Disbursed)</li>
                        <li><strong>Outstanding Balance:</strong> Reserved + Encumbered (committed funds in pipeline)</li>
                    </ul>
                    <br>

                    <strong>Application Metrics:</strong>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>Total applications (count by status: Draft, Submitted by IHE, Submitted, Under Review, Conditionally Approved, Approved, Rejected)</li>
                        <li>Applications requiring attention (submitted, awaiting review)</li>
                        <li>Conditionally approved applications (awaiting LEA revision)</li>
                    </ul>
                    <br>

                    <strong>Participant Metrics:</strong>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li># of Student Teachers (unique SEIDs)</li>
                        <li># of IHEs participating</li>
                        <li># of LEAs participating</li>
                        <li>Top IHEs by application volume (optional)</li>
                    </ul>
                    <br>

                    <strong>Visualizations:</strong>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>Fund depletion over time (line chart)</li>
                        <li>Application status distribution (pie chart)</li>
                        <li>Awards by IHE/LEA (bar chart)</li>
                    </ul>
                    <br>

                    <strong>Real-time updates:</strong> Dashboard refreshes when application statuses change, awards approved, GAAs signed, payments completed. Can use SignalR for live updates or page refresh.
                </div>
                <div class="tech-note">SQL aggregation queries, calculated properties on GrantCycle entity (ReservedAmount, EncumberedAmount, DisbursedAmount, OutstandingBalance), Telerik Charts, optional SignalR for real-time push updates, export to Excel functionality</div>
            </div>

            <div class="process-step automated">
                <span class="step-number">13</span>
                <div class="step-title">Public Accountability Dashboard (Phase 2)</div>
                <div class="step-details">
                    <strong>Phase 2 feature for public transparency.</strong> Public Portal shows aggregated outcomes (no PII):<br><br>

                    <strong>Completion Metrics:</strong>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>Total participants by year</li>
                        <li>Completion rate (completed program vs. early withdrawal)</li>
                        <li>Early withdrawal reasons (changed to intern, withdrew, other)</li>
                    </ul>
                    <br>

                    <strong>Credential Outcomes:</strong>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>% earned credential</li>
                        <li>% remained in original credential area</li>
                        <li>Credential area distribution</li>
                    </ul>
                    <br>

                    <strong>Employment & Retention:</strong>
                    <ul style="margin-top: 10px; margin-left: 40px;">
                        <li>% employed in education after completion</li>
                        <li>% employed at host LEA (retention)</li>
                        <li>Retention rates by year (1 year, 2 years post-completion)</li>
                        <li>Employment by county/region</li>
                    </ul>
                    <br>

                    <strong>Data Sources:</strong> IHE/LEA reports + ECS Data Warehouse integration (employment records by SEID)
                </div>
                <div class="tech-note">Data aggregation queries, ECS Data Warehouse REST API integration, scheduled ETL jobs (nightly/weekly), Telerik Reporting for PDF generation, anonymization filters (no PII exposed), chart libraries</div>
            </div>
        </div>

        <!-- COMPLEXITY MATRIX -->
        <h2>üìä V1 Complexity Assessment</h2>

        <div class="legend">
            <h3>T-Shirt Sizes (Development Effort)</h3>
            <div class="legend-item"><span class="badge xs">XS</span> 1-3 days (simple CRUD, UI components)</div>
            <div class="legend-item"><span class="badge sm">SM</span> 3-5 days (basic workflows, validations)</div>
            <div class="legend-item"><span class="badge md">MD</span> 1-2 weeks (complex workflows, integrations)</div>
            <div class="legend-item"><span class="badge lg">LG</span> 2-4 weeks (major features, APIs, security)</div>
            <div class="legend-item"><span class="badge xl">XL</span> 4-8 weeks (platform features, external integrations)</div>
            <br><br>
            <h3>V1 Priority</h3>
            <div class="legend-item"><span class="badge required">REQUIRED</span> Must-have for April 1, 2026 launch</div>
            <div class="legend-item"><span class="badge optional">OPTIONAL</span> Nice-to-have, can launch without</div>
            <div class="legend-item"><span class="badge phase2">PHASE 2</span> Post-launch enhancement</div>
        </div>

        <h3>Core Platform Features</h3>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Complexity</th>
                    <th>V1 Status</th>
                    <th>Dependencies / Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Three-Portal Architecture</strong><br>Staff, Grantee, Public portals with shared backend</td>
                    <td><span class="badge lg">LG</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Foundation. Auth setup, layout templates, routing, role-based access</td>
                </tr>
                <tr>
                    <td><strong>Authentication</strong><br>Staff: EntraID OIDC, Grantee: OAuth (Google/MS), Public: None</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>ASP.NET Core Identity, Microsoft.Identity.Web, OAuth providers</td>
                </tr>
                <tr>
                    <td><strong>Role-Based Authorization</strong><br>Admin, Grants Team, Fiscal, Reviewer, IHE, LEA, Public</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Policy-based authorization, role seeding</td>
                </tr>
                <tr>
                    <td><strong>Audit Logging</strong><br>Track all data changes with user/timestamp</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>EF Core interceptors, AuditEvents table, query interface</td>
                </tr>
                <tr>
                    <td><strong>Email Service</strong><br>Transactional emails (notifications, magic links, reminders)</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Azure SendGrid or similar, template engine (Razor)</td>
                </tr>
            </tbody>
        </table>

        <h3>Grant Program Management</h3>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Complexity</th>
                    <th>V1 Status</th>
                    <th>Dependencies / Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Program & Grant Cycle Configuration</strong><br>Admin UI to create/edit programs, define grant cycles with dates, funding</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>CRUD UI with Telerik forms, validation for date ranges, appropriation amounts</td>
                </tr>
                <tr>
                    <td><strong>JSON Schema Application Builder</strong><br>UI to define dynamic application questions per program</td>
                    <td><span class="badge lg">LG</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>JSON Schema editor, form preview, field types (text, number, upload, dropdown, etc)</td>
                </tr>
                <tr>
                    <td><strong>Scoring Rubric Configuration</strong><br>Define scoring criteria, point values per program</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td>Only needed for competitive grants. STIPEND (V1 priority) is non-competitive</td>
                </tr>
                <tr>
                    <td><strong>Award Formula Engine</strong><br>Configurable formulas for auto-calculating award amounts</td>
                    <td><span class="badge lg">LG</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td>STIPEND uses flat $10k/$5k. Other grants may need formulas. Manual override OK for V1</td>
                </tr>
                <tr>
                    <td><strong>Report Template Configuration</strong><br>Define required report types, schemas per program</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Reporting due July 2026, can be Phase 2 (post-April launch)</td>
                </tr>
            </tbody>
        </table>

        <h3>Public Portal Features</h3>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Complexity</th>
                    <th>V1 Status</th>
                    <th>Dependencies / Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Grant Opportunity Listings</strong><br>Display available grants with RFA info, deadlines, eligibility</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Read-only view of active grant cycles, filter by program type</td>
                </tr>
                <tr>
                    <td><strong>RFA Document Generation</strong><br>Auto-generate RFA webpage from grant cycle config</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td>Can link to static PDF for V1, generate dynamically in Phase 2</td>
                </tr>
                <tr>
                    <td><strong>Intent to Apply Submission</strong><br>Unauthenticated form for prospective applicants</td>
                    <td><span class="badge xs">XS</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td>Simple form + email notification. Nice-to-have, not critical</td>
                </tr>
                <tr>
                    <td><strong>Public Dashboard</strong><br>Aggregated grant data, demographics, outcomes (no PII)</td>
                    <td><span class="badge lg">LG</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Reporting feature. Needs aggregation queries, charts, data warehouse integration</td>
                </tr>
            </tbody>
        </table>

        <h3>Grantee Portal - Application Workflow</h3>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Complexity</th>
                    <th>V1 Status</th>
                    <th>Dependencies / Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Dynamic Application Forms</strong><br>Render forms from JSON Schema, client/server validation</td>
                    <td><span class="badge lg">LG</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Core feature. JSON Schema ‚Üí HTML form, validation rules, file uploads</td>
                </tr>
                <tr>
                    <td><strong>ECS Integration - Org Lookup</strong><br>Autocomplete for IHE/LEA from ECS directory</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td>If ECS API available. Else: manual org entry with dropdown from seed data</td>
                </tr>
                <tr>
                    <td><strong>ECS Integration - SEID Matching</strong><br>Auto-populate candidate demographics from SEID lookup</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td>STIPEND feature. If ECS API unavailable, collect demographics manually</td>
                </tr>
                <tr>
                    <td><strong>Two-Party Workflow (IHE ‚Üí LEA)</strong><br>State machine: IHE submits ‚Üí notify LEA ‚Üí LEA completes ‚Üí submit</td>
                    <td><span class="badge lg">LG</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>STIPEND-specific. State transitions, email notifications, role-based views</td>
                </tr>
                <tr>
                    <td><strong>Magic Link Grantee Data Collection</strong><br>Generate tokenized links, unauthenticated form submission</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>STIPEND: LEAs need to collect from 10-50 student teachers. Core efficiency gain</td>
                </tr>
                <tr>
                    <td><strong>File Upload & Storage</strong><br>Handle PDF, Word, Excel uploads. Store in Azure Blob</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Applications include supporting docs. Azure Blob integration, virus scanning</td>
                </tr>
                <tr>
                    <td><strong>Draft Auto-Save</strong><br>Save application progress, resume later</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td>Nice UX feature but not critical. Can use browser localStorage as workaround</td>
                </tr>
                <tr>
                    <td><strong>Application Status Dashboard</strong><br>Grantee sees submitted apps, review status, award status</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Table view with filtering, status badges, action buttons</td>
                </tr>
            </tbody>
        </table>

        <h3>Staff Portal - Dashboard & Monitoring</h3>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Complexity</th>
                    <th>V1 Status</th>
                    <th>Dependencies / Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Operational Dashboard - Financial Tracking</strong><br>Real-time display of Appropriated, Reserved, Encumbered, Disbursed, Remaining, Outstanding Balance</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Calculated properties on GrantCycle entity, SQL aggregation queries, chart widgets</td>
                </tr>
                <tr>
                    <td><strong>Operational Dashboard - Application Metrics</strong><br>Count applications by status, show breakdown charts</td>
                    <td><span class="badge xs">XS</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Simple GroupBy queries, Telerik pie/bar charts</td>
                </tr>
                <tr>
                    <td><strong>Operational Dashboard - Participant Metrics</strong><br># of SEIDs, IHEs, LEAs participating</td>
                    <td><span class="badge xs">XS</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Distinct count queries on Application entity</td>
                </tr>
                <tr>
                    <td><strong>Dashboard Visualizations</strong><br>Fund depletion chart, status pie chart, awards by org bar chart</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Telerik Charts (line, pie, bar), responsive design</td>
                </tr>
                <tr>
                    <td><strong>Real-Time Dashboard Updates</strong><br>Live updates via SignalR when data changes</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td>SignalR hub, broadcast on entity changes. V1 can refresh on page load</td>
                </tr>
                <tr>
                    <td><strong>Dashboard Export to Excel</strong><br>Download current dashboard data as spreadsheet</td>
                    <td><span class="badge xs">XS</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td>Export button using EPPlus or similar library</td>
                </tr>
                <tr>
                    <td><strong>Public Accountability Dashboard</strong><br>Outcome metrics: completion, credentials, employment, retention</td>
                    <td><span class="badge lg">LG</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Requires report data + ECS Data Warehouse integration. Post-launch feature</td>
                </tr>
            </tbody>
        </table>

        <h3>Staff Portal - Review & Award Workflow</h3>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Complexity</th>
                    <th>V1 Status</th>
                    <th>Dependencies / Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Application Queue & Filtering</strong><br>Staff see all submitted apps, filter by status, grant cycle, org</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Telerik Grid with filtering, sorting, export to Excel</td>
                </tr>
                <tr>
                    <td><strong>Application Detail View</strong><br>Read-only view of submitted application with all data, files</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Render form from JSON Schema in read-only mode, download files</td>
                </tr>
                <tr>
                    <td><strong>Eligibility Check UI</strong><br>Staff mark app as eligible/ineligible with reason codes</td>
                    <td><span class="badge xs">XS</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>STIPEND is non-competitive: eligibility check ‚Üí approve. Simple workflow</td>
                </tr>
                <tr>
                    <td><strong>Reviewer Assignment</strong><br>Admin assigns reviewers to applications, COI checking</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Competitive grants only. Not needed for STIPEND V1</td>
                </tr>
                <tr>
                    <td><strong>Scoring Interface</strong><br>Reviewers score applications against rubric, add comments</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Competitive grants only. Not needed for STIPEND V1</td>
                </tr>
                <tr>
                    <td><strong>Score Aggregation & Deliberations</strong><br>Auto-calculate scores, rank applications, deliberation UI</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Competitive grants only. Not needed for STIPEND V1</td>
                </tr>
                <tr>
                    <td><strong>Conditional Funding Workflow</strong><br>Inline comments on fields, request revisions, version history</td>
                    <td><span class="badge lg">LG</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td>Huge time saver but complex. Can use email for V1, in-app for Phase 2</td>
                </tr>
                <tr>
                    <td><strong>Award Approval & Auto-Generation</strong><br>Staff approve app ‚Üí system creates Award record with amount</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Core workflow. Calculate award amount (formula or flat), deduct from appropriation</td>
                </tr>
                <tr>
                    <td><strong>Real-Time Fund Tracking</strong><br>Dashboard shows remaining appropriation, encumbrance dates</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Critical visibility. SQL aggregation, chart display, alert thresholds</td>
                </tr>
                <tr>
                    <td><strong>Bulk Operations</strong><br>Approve/reject multiple apps, bulk email, export data</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td>Efficiency feature but not critical for V1. One-by-one OK initially</td>
                </tr>
            </tbody>
        </table>

        <h3>External Integrations</h3>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Complexity</th>
                    <th>V1 Status</th>
                    <th>Dependencies / Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>DocuSign API - GAA Creation</strong><br>Auto-populate GAA template, create envelope, routing, webhooks</td>
                    <td><span class="badge lg">LG</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Major time saver. DocuSign API, template mapping, webhook handlers, signature tracking</td>
                </tr>
                <tr>
                    <td><strong>ECS API - Organization Data</strong><br>Read-only: Query IHE/LEA directory, SEID lookup</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge optional">OPTIONAL</span></td>
                    <td><strong>Dependency Risk:</strong> ECS API may not exist. Fallback: seed Organization table from CSV export</td>
                </tr>
                <tr>
                    <td><strong>FI$Cal Integration - Phase 1 Export</strong><br>Generate CSV/XML export for manual PO entry</td>
                    <td><span class="badge sm">SM</span></td>
                    <td><span class="badge required">REQUIRED</span></td>
                    <td>Minimal lift. Export award data in FI$Cal-compatible format</td>
                </tr>
                <tr>
                    <td><strong>FI$Cal Integration - Phase 2 API</strong><br>REST API to create payables, poll payment status</td>
                    <td><span class="badge xl">XL</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Complex. FI$Cal API discovery, authentication, payable creation, polling jobs, error handling</td>
                </tr>
                <tr>
                    <td><strong>Data Warehouse Integration</strong><br>Pull employment outcomes for public dashboard</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Reporting feature. Scheduled ETL jobs, aggregation queries</td>
                </tr>
            </tbody>
        </table>

        <h3>Reporting Features</h3>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Complexity</th>
                    <th>V1 Status</th>
                    <th>Dependencies / Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Grantee Reporting Forms</strong><br>Dynamic forms for annual/expenditure reports with validation</td>
                    <td><span class="badge lg">LG</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Reports due July 2026. Can launch April 1st without reporting, add by June</td>
                </tr>
                <tr>
                    <td><strong>Staff Reporting Dashboard</strong><br>View submitted reports, validation errors, approval workflow</td>
                    <td><span class="badge md">MD</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Pairs with grantee reporting forms. Phase 2</td>
                </tr>
                <tr>
                    <td><strong>Legislative Reports</strong><br>Generate required reports for state legislature (Telerik Reporting)</td>
                    <td><span class="badge lg">LG</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Custom report templates, aggregation queries, PDF generation. Not needed for launch</td>
                </tr>
                <tr>
                    <td><strong>Ad-Hoc Query Builder</strong><br>Staff build custom reports, export to Excel</td>
                    <td><span class="badge xl">XL</span></td>
                    <td><span class="badge phase2">PHASE 2</span></td>
                    <td>Advanced feature. Nice-to-have but not critical</td>
                </tr>
            </tbody>
        </table>

        <!-- SUMMARY RECOMMENDATIONS -->
        <h2>üéØ V1 Launch Strategy Recommendations</h2>

        <div class="comparison">
            <div class="comparison-col">
                <h3>‚úÖ Must-Have for V1 (April 1, 2026)</h3>
                <ul style="line-height: 2;">
                    <li>Three-portal architecture with authentication</li>
                    <li>Grant program & cycle configuration</li>
                    <li>JSON Schema application forms</li>
                    <li>Two-party workflow (IHE ‚Üí LEA)</li>
                    <li>Magic link grantee data collection</li>
                    <li>Application submission & status tracking</li>
                    <li>Eligibility check & approval workflow</li>
                    <li>Auto-award generation with fund tracking</li>
                    <li>DocuSign GAA integration</li>
                    <li>FI$Cal export (Phase 1)</li>
                    <li>Audit logging</li>
                    <li>Email notifications</li>
                </ul>
                <p><strong>Total Complexity:</strong> ~16-20 weeks (4-5 month dev timeline)</p>
            </div>

            <div class="comparison-col">
                <h3>üîÑ Phase 2 (Post-April 2026)</h3>
                <ul style="line-height: 2;">
                    <li>Reviewer assignment & scoring (competitive grants)</li>
                    <li>In-app conditional funding revisions</li>
                    <li>Grantee reporting forms (June 2026 for July reports)</li>
                    <li>Staff reporting dashboard</li>
                    <li>Public data dashboard</li>
                    <li>FI$Cal API integration</li>
                    <li>ECS full integration (if API available)</li>
                    <li>Data warehouse integration</li>
                    <li>Legislative report generation</li>
                    <li>Bulk operations</li>
                    <li>Award formula engine</li>
                </ul>
                <p><strong>Priority:</strong> Reporting features by June 2026, others as needed</p>
            </div>
        </div>

        <div class="highlight">
            <h3>Critical Path & Risk Mitigation</h3>
            <ul style="margin-top: 15px; line-height: 1.8;">
                <li><strong>Start Immediately:</strong> Three-portal architecture, authentication, database schema (already in progress)</li>
                <li><strong>Week 4-8:</strong> JSON Schema form builder, dynamic rendering, validation</li>
                <li><strong>Week 8-12:</strong> Two-party workflow, magic links, application submission</li>
                <li><strong>Week 12-16:</strong> Staff review/approval UI, award generation, fund tracking</li>
                <li><strong>Week 16-20:</strong> DocuSign integration, FI$Cal export, testing, deployment</li>
                <li><strong>Risk: ECS API</strong> - Assume unavailable. Seed Organization table from CSV. SEID lookup can be manual input for V1</li>
                <li><strong>Risk: DocuSign API</strong> - High priority. Start integration early. If fails, fallback to manual GAA creation with GMS-generated content</li>
                <li><strong>Decision: Competitive Grant Features</strong> - Defer to Phase 2. STIPEND (V1) is non-competitive, so scoring/reviewer workflow not needed initially</li>
            </ul>
        </div>

        <h3>Success Metrics for V1</h3>
        <ul style="line-height: 2; margin: 20px 0;">
            <li>‚úÖ STIPEND grant fully automated: IHE applies ‚Üí LEA completes ‚Üí staff approves ‚Üí GAA sent ‚Üí award tracked</li>
            <li>‚úÖ Zero email-based application intake (all via portal)</li>
            <li>‚úÖ Real-time fund tracking visible to staff</li>
            <li>‚úÖ Magic links eliminate manual demographic data entry</li>
            <li>‚úÖ DocuSign GAAs auto-populated (no copy/paste)</li>
            <li>‚úÖ Application ‚Üí award cycle reduced from 6-8 weeks to 2-3 weeks</li>
            <li>‚úÖ System handles 500+ concurrent users, 10,000+ applications per cycle (per SOW requirements)</li>
        </ul>

        <!-- STATE MACHINES -->
        <h2>üîÑ State Machine Definitions (Merged)</h2>

        <div class="highlight">
            <strong>Why State Machines Matter:</strong> The Figma flow showed user actions and decisions but didn't formalize the underlying application and award states. These state machines ensure consistent status tracking and enable proper audit trails.
        </div>

        <h3>Application State Machine</h3>
        <table>
            <thead>
                <tr>
                    <th>State</th>
                    <th>Triggered By</th>
                    <th>Next Possible States</th>
                    <th>Notifications</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Draft</strong></td>
                    <td>IHE creates new application</td>
                    <td>Submitted by IHE, Abandoned (auto-expire after 30 days)</td>
                    <td>None (reminder at 7 days if incomplete)</td>
                </tr>
                <tr>
                    <td><strong>Submitted by IHE</strong></td>
                    <td>IHE clicks "Submit"</td>
                    <td>Submitted (by LEA), Draft (if IHE unlocks to edit)</td>
                    <td>Email to LEA POC</td>
                </tr>
                <tr>
                    <td><strong>Submitted</strong></td>
                    <td>LEA clicks "Submit"</td>
                    <td>Under Review, Rejected (No Funding)</td>
                    <td>Email to Grants Team (daily digest)</td>
                </tr>
                <tr>
                    <td><strong>Under Review</strong></td>
                    <td>Grants Team opens application</td>
                    <td>Approved, Conditionally Approved, Rejected</td>
                    <td>None</td>
                </tr>
                <tr>
                    <td><strong>Conditionally Approved</strong></td>
                    <td>Grants Team requests revisions</td>
                    <td>Submitted (after LEA resubmits), Rejected (if not fixed)</td>
                    <td>Email to LEA with list of issues</td>
                </tr>
                <tr>
                    <td><strong>Approved</strong></td>
                    <td>Grants Team approves</td>
                    <td>(Terminal for application - Award entity created)</td>
                    <td>Email to LEA, IHE, Fiscal Team</td>
                </tr>
                <tr>
                    <td><strong>Rejected</strong></td>
                    <td>Grants Team rejects (bad info after multiple revisions, ineligible)</td>
                    <td>(Terminal)</td>
                    <td>Email to LEA, IHE with reason</td>
                </tr>
                <tr>
                    <td><strong>Rejected (No Funding)</strong></td>
                    <td>Grants Team rejects due to exhausted funds</td>
                    <td>(Terminal)</td>
                    <td>Email to LEA, IHE explaining no funds remaining</td>
                </tr>
            </tbody>
        </table>

        <h3>Award State Machine</h3>
        <table>
            <thead>
                <tr>
                    <th>State</th>
                    <th>Triggered By</th>
                    <th>Next Possible States</th>
                    <th>Fund Status Change</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Pending GAA</strong></td>
                    <td>Application approved (system auto-creates Award)</td>
                    <td>GAA Sent</td>
                    <td>Funds reserved: <code>GrantCycle.ReservedAmount += award_amount</code></td>
                </tr>
                <tr>
                    <td><strong>GAA Sent</strong></td>
                    <td>Fiscal triggers DocuSign</td>
                    <td>GAA Signed, GAA Expired (if not signed within 30 days)</td>
                    <td>No change</td>
                </tr>
                <tr>
                    <td><strong>GAA Signed</strong></td>
                    <td>All parties complete DocuSign</td>
                    <td>Payment Initiated</td>
                    <td>Funds encumbered: <code>ReservedAmount -= award_amount; EncumberedAmount += award_amount</code></td>
                </tr>
                <tr>
                    <td><strong>Payment Initiated</strong></td>
                    <td>Fiscal exports to FI$Cal or creates PO</td>
                    <td>Payment Completed</td>
                    <td>No change (Phase 2: track PO/Invoice/Voucher substates)</td>
                </tr>
                <tr>
                    <td><strong>Payment Completed</strong></td>
                    <td>Fiscal marks distributed or FI$Cal webhook (Phase 2)</td>
                    <td>Awaiting Reports</td>
                    <td>Funds disbursed: <code>EncumberedAmount -= award_amount; DisbursedAmount += award_amount</code></td>
                </tr>
                <tr>
                    <td><strong>Awaiting Reports</strong></td>
                    <td>Payment completed + report due date approaching</td>
                    <td>Reports Submitted</td>
                    <td>No change</td>
                </tr>
                <tr>
                    <td><strong>Reports Submitted</strong></td>
                    <td>Both IHE and LEA reports submitted</td>
                    <td>Closed</td>
                    <td>No change</td>
                </tr>
                <tr>
                    <td><strong>Closed</strong></td>
                    <td>Grants Team approves reports</td>
                    <td>(Terminal)</td>
                    <td>No change</td>
                </tr>
            </tbody>
        </table>

        <!-- UPDATED V1 RECOMMENDATIONS -->
        <h2>üéØ Updated V1 Launch Strategy (Post-Merge)</h2>

        <div class="comparison">
            <div class="comparison-col">
                <h3>‚úÖ Confirmed V1 Must-Haves</h3>
                <ul style="line-height: 2;">
                    <li>Three-portal architecture (Staff, Grantee, Public)</li>
                    <li>Authentication (EntraID, OAuth)</li>
                    <li>Grant program & cycle configuration</li>
                    <li>JSON Schema application forms</li>
                    <li><strong>Draft auto-save state</strong> (added from merge)</li>
                    <li>Two-party workflow (IHE ‚Üí LEA handoff)</li>
                    <li><strong>Magic link grantee data collection</strong></li>
                    <li><strong>SEID matching at IHE entry</strong> (timing clarified)</li>
                    <li>Application queue with three review outcomes</li>
                    <li><strong>Operational Dashboard</strong> (financial, application, participant metrics with charts) ‚≠ê NEW</li>
                    <li>Award auto-generation with state machine</li>
                    <li><strong>GAA auto-generation (system creates, fiscal reviews)</strong> (ambiguity resolved)</li>
                    <li><strong>Multi-party DocuSign with routing</strong> (LEA ‚Üí Cara ‚Üí Saelee)</li>
                    <li>FI$Cal export (Phase 1)</li>
                    <li>Payment status manual tracking</li>
                    <li>Audit logging throughout</li>
                </ul>
                <p><strong>Total Complexity:</strong> ~19-24 weeks (updated with dashboard requirements: +1-2 weeks for financial tracking, visualizations, and real-time metrics)</p>
                <p style="margin-top: 10px;"><strong>Dashboard Breakdown:</strong> Financial tracking (SM) + Application metrics (XS) + Participant metrics (XS) + Visualizations (SM) = ~1-2 weeks additional work</p>
            </div>

            <div class="comparison-col">
                <h3>üîÑ Confirmed Phase 2 (Post-April)</h3>
                <ul style="line-height: 2;">
                    <li>Competitive grant scoring & reviewer assignment</li>
                    <li><strong>In-app conditional funding revisions</strong> (V1 uses email + unlock)</li>
                    <li><strong>Grantee reporting forms</strong> (Target: June 2026 for July reports)</li>
                    <li>Staff reporting review dashboard</li>
                    <li><strong>Public Accountability Dashboard</strong> (completion, credentials, employment, retention outcomes) ‚≠ê NEW</li>
                    <li>FI$Cal API integration (if available)</li>
                    <li>ECS full API integration</li>
                    <li><strong>ECS Data Warehouse integration</strong> (employment outcomes, credential tracking) ‚≠ê REQUIRED FOR PUBLIC DASHBOARD</li>
                    <li>Legislative report generation (Telerik Reporting)</li>
                    <li>Bulk operations (approve multiple, export batches)</li>
                    <li>Award formula engine (for non-STIPEND grants)</li>
                    <li>CSV bulk upload for 50+ candidates</li>
                    <li>Real-time dashboard updates via SignalR (optional enhancement)</li>
                </ul>
                <p><strong>Priority Sequence:</strong> Reporting (June '26) > Public Dashboard (requires reporting data + ECS integration) > Competitive grants (when needed) > Advanced features</p>
            </div>
        </div>

        <div class="highlight">
            <h3>Key Merge Outcomes</h3>
            <ul style="margin-top: 15px; line-height: 1.8;">
                <li><strong>Figma validated 80% of our original analysis</strong> - core workflows match, user interactions confirmed</li>
                <li><strong>We added 5 critical missing features:</strong> Magic links, fund dashboard, draft state, public portal expansion, award state granularity</li>
                <li><strong>We resolved 5 ambiguities:</strong> GAA generation (auto), SEID timing (early), multi-candidate (repeating forms), DocuSign routing (3-party), fund depletion (hybrid warn+decide)</li>
                <li><strong>State machines formalized:</strong> 8 application states, 8 award states with clear transitions and notifications</li>
                <li><strong>Dashboard requirements specified (Latest Update):</strong> Updated Figma (Nov 3 PM) added comprehensive dashboard specs with financial tracking (Appropriated/Reserved/Encumbered/Disbursed/Outstanding Balance), application/participant metrics, and outcome KPIs. Operational dashboard confirmed for V1, public accountability dashboard deferred to Phase 2</li>
                <li><strong>V1 scope adjustment:</strong> Increased complexity (+3-4 weeks total) - original merge added +2 weeks for state machines/DocuSign, dashboard adds +1-2 weeks. Final estimate: 19-24 weeks for V1</li>
                <li><strong>No true conflicts:</strong> Only one divergence (fund depletion timing) resolved with hybrid approach acceptable to both perspectives</li>
            </ul>
        </div>

        <h3>Next Steps with CTC Stakeholders</h3>
        <ol style="line-height: 2; margin: 20px 0;">
            <li><strong>Review this merged analysis</strong> with Cara Mendoza, Sara Saelee, Eddie, and fiscal team</li>
            <li><strong>Confirm resolved ambiguities:</strong> GAA auto-generation, SEID matching timing, DocuSign routing order</li>
            <li><strong>Validate state machines:</strong> Do the 8 application states and 8 award states cover all scenarios?</li>
            <li><strong>Clarify dashboard requirements:</strong>
                <ul style="margin-top: 5px;">
                    <li>Confirm "Outstanding Balance" definition (Reserved + Encumbered?)</li>
                    <li>Which outcome metrics are V1 vs. Phase 2?</li>
                    <li>When are employment/retention outcomes measured (1 year, 2 years post-completion)?</li>
                    <li>Public dashboard scope - which metrics are public vs. staff-only?</li>
                </ul>
            </li>
            <li><strong>Update Figma diagram</strong> with missing features (magic links, draft state, award substates) - dashboard already documented</li>
            <li><strong>Design dashboard UI mockups</strong> with Telerik Charts (fund depletion line chart, status pie chart, awards bar chart)</li>
            <li><strong>Proceed to Business Requirements Document (BRD)</strong> using this merged flow as foundation</li>
            <li><strong>Begin ERD development</strong> with state machine states and dashboard calculated properties (ReservedAmount, EncumberedAmount, etc.)</li>
            <li><strong>Prototype JSON Schema form builder</strong> to validate dynamic form approach</li>
            <li><strong>Schedule technical discovery:</strong> DocuSign API access, ECS API availability (SEID lookup + Data Warehouse for outcomes), FI$Cal integration options</li>
        </ol>

        <p style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #e2e8f0; color: #666;">
            <strong>Document Version:</strong> 2.1 (Dashboard Requirements Added) | <strong>Date:</strong> November 3, 2025 (Updated 4:30 PM) | <strong>Previous Versions:</strong> 2.0 (Merged with Figma PDF), 1.0 (Requirements Analysis Only) | <strong>Next Review:</strong> Dashboard mockup review + stakeholder sign-off on merged requirements
        </p>
    </div>
</body>
</html>
