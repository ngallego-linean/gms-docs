@* ~/Views/Shared/_Layout.cshtml *@
@* R4 Application Layout (UI-100 to UI-109) *@

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Grant Management System</title>
    <link rel="icon" type="image/x-icon" href="~/favicon.ico">

    @* Material Design Icons *@
    <link rel="stylesheet" href="https://cdn.materialdesignicons.com/7.4.47/css/materialdesignicons.min.css">

    @* R4-Compliant Application CSS *@
    <link rel="stylesheet" href="~/css/r4-styles.css" />
    <link rel="stylesheet" href="~/css/dashboard.css" />

    @* BugHerd Feedback Widget *@
    <script type="text/javascript" src="https://www.bugherd.com/sidebarv2.js?apikey=1tm1s8ar8gbvvhgxtlqola" async="true"></script>

    @RenderSection("Styles", required: false)
</head>
<body>
    @* R4 Header (UI-100 to UI-102) *@
    <header class="r4-header">
        <div class="r4-header-left">
            <div class="logo-container">
                <a href="https://ca.gov" target="_blank" title="California State Portal">
                    <img src="~/images/ca-logo.png" alt="California State Logo" class="logo-ca">
                </a>
                <a href="https://www.ctc.ca.gov" target="_blank" title="Commission on Teacher Credentialing">
                    <img src="~/images/ctc-logo.png" alt="CTC Logo" class="logo-ctc">
                </a>
            </div>
            <div class="system-name">
                <h1>Grant Management System</h1>
                <span class="system-acronym">GMS</span>
                <span class="env-badge">MOCKUP</span>
            </div>
        </div>
        <div class="r4-header-right">
            <a asp-controller="Reporting" asp-action="Dashboard" class="header-link" title="Reports">
                <i class="mdi mdi-file-chart-outline"></i> Reports
            </a>
            <a href="#" class="header-link" title="Help & Documentation">
                <i class="mdi mdi-help-circle-outline"></i> Help
            </a>
            <div class="user-profile">
                <i class="mdi mdi-account-circle"></i>
                <span>@(User.Identity?.Name ?? "Guest")</span>
            </div>
        </div>
    </header>

    <div class="r4-layout">
        @* Left Vertical Navigation (UI-103 to UI-104) *@
        <nav class="r4-left-nav">
            <div class="nav-section">
                <div class="nav-section-title">Main</div>
                <ul class="nav-menu">
                    <li>
                        <a asp-controller="Home" asp-action="Index" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Home" ? "active" : "")">
                            <i class="mdi mdi-view-dashboard"></i> Home
                        </a>
                    </li>
                </ul>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">CTC Staff</div>
                <ul class="nav-menu">
                    <li>
                        <a asp-controller="GrantsTeam" asp-action="Dashboard" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "GrantsTeam" ? "active" : "")">
                            <i class="mdi mdi-clipboard-check-outline"></i> Grants Team
                        </a>
                    </li>
                    <li>
                        <a asp-controller="Application" asp-action="Index" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Application" ? "active" : "")">
                            <i class="mdi mdi-file-document-multiple"></i> All Applications
                        </a>
                    </li>
                    <li>
                        <a asp-controller="GrantsTeam" asp-action="Analytics" class="@(ViewContext.RouteData.Values["action"]?.ToString() == "Analytics" ? "active" : "")">
                            <i class="mdi mdi-chart-box-outline"></i> Analytics
                        </a>
                    </li>
                    <li>
                        <a asp-controller="Search" asp-action="Index" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Search" ? "active" : "")">
                            <i class="mdi mdi-magnify"></i> Search
                        </a>
                    </li>
                    <li>
                        <a asp-controller="Reporting" asp-action="Dashboard" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Reporting" ? "active" : "")">
                            <i class="mdi mdi-chart-line"></i> Reporting
                        </a>
                    </li>
                </ul>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Portals</div>
                <ul class="nav-menu">
                    <li>
                        <a asp-controller="IHEPortal" asp-action="Dashboard" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "IHEPortal" ? "active" : "")">
                            <i class="mdi mdi-school-outline"></i> IHE Portal
                        </a>
                    </li>
                    <li>
                        <a asp-controller="LEAPortal" asp-action="Dashboard" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "LEAPortal" ? "active" : "")">
                            <i class="mdi mdi-domain"></i> LEA Portal
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        @* Main Content Wrapper *@
        <div class="r4-content-wrapper">
            @* Breadcrumbs (UI-110 to UI-119) *@
            @if (IsSectionDefined("Breadcrumbs"))
            {
                <nav class="r4-breadcrumbs" aria-label="breadcrumb">
                    @RenderSection("Breadcrumbs", required: false)
                </nav>
            }

            @* Page Content *@
            <main class="r4-content">
                @RenderBody()
            </main>
        </div>
    </div>

    @* R4 Footer (UI-105 to UI-109) *@
    <footer class="r4-footer">
        <div class="footer-content">
            <div class="footer-left">
                <strong>Grant Management System (GMS)</strong> |
                <a href="https://www.ctc.ca.gov/privacy" target="_blank">Privacy Policy</a> |
                <a href="mailto:gms-support@ctc.ca.gov">Support</a>
            </div>
            <div class="footer-right">
                <span class="build-info">Build: 1.0.0-mockup | Â© @DateTime.Now.Year California Commission on Teacher Credentialing</span>
            </div>
        </div>
    </footer>

    @* Scripts *@
    <script src="~/js/site.js" asp-append-version="true"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
